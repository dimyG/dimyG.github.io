<!DOCTYPE html><html lang="en" > <!-- The Head v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Zakanda technical overview | Dimitris Georgoulas</title><meta name="generator" content="Jekyll v4.0.1" /><meta property="og:title" content="Zakanda technical overview" /><meta name="author" content="Dimitris Georgoulas" /><meta property="og:locale" content="en_US" /><meta name="description" content="Introduction zakanda is my first entrepreneurial endeavor which… failed miserably. You can read the juicy details in my epic fail as a sports betting entrepreneur story." /><meta property="og:description" content="Introduction zakanda is my first entrepreneurial endeavor which… failed miserably. You can read the juicy details in my epic fail as a sports betting entrepreneur story." /><link rel="canonical" href="https://dimyg.github.io/posts/zakanda_technical_overview/" /><meta property="og:url" content="https://dimyg.github.io/posts/zakanda_technical_overview/" /><meta property="og:site_name" content="Dimitris Georgoulas" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-06-03T09:33:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Zakanda technical overview" /><meta name="twitter:site" content="@DimiGeorgoulas" /><meta name="twitter:creator" content="@Dimitris Georgoulas" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@type":"BlogPosting","headline":"Zakanda technical overview","url":"https://dimyg.github.io/posts/zakanda_technical_overview/","dateModified":"2020-06-03T09:33:00+00:00","datePublished":"2020-06-03T09:33:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://dimyg.github.io/posts/zakanda_technical_overview/"},"author":{"@type":"Person","name":"Dimitris Georgoulas"},"description":"Introduction zakanda is my first entrepreneurial endeavor which… failed miserably. You can read the juicy details in my epic fail as a sports betting entrepreneur story.","@context":"https://schema.org"}</script> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT license --><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.css" /><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/popper.js@1.15.0/dist/umd/popper.min.js" integrity="sha256-fTuUgtT7O2rqoImwjrhDgbXTKUwyxxujIMRIK7TbuNU=" crossorigin> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script> window.jQuery || document.write('<script src="/assets/lib/jquery-3.4.1.min.js"><\/script>'); </script> <script src="https://cdn.jsdelivr.net/npm/popper.js@1.15.0/dist/umd/popper.min.js" integrity="sha256-fTuUgtT7O2rqoImwjrhDgbXTKUwyxxujIMRIK7TbuNU=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha256-5+02zu5UULQkO7w1GIr6vftCgMfFdZcAHeDtFnKZsBs=" crossorigin="anonymous" async></script> <script src="/assets/js/dist/commons.js" async></script> <script src="/assets/js/dist/timeago.min.js" async></script><link rel="preload" as="script" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.js"> <script src="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.js" async></script> <script src="/assets/js/dist/toc.min.js" async></script> <script src="/assets/js/dist/tooltip-loader.min.js" async></script> <script src="/app.js" defer></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"> <!-- The Side Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/sample/profile_02_e.png" alt="avatar"> </a></div><div class="profile-text mt-3"><div id="site-title"> <a href="/">Dimitris Georgoulas</a></div><div id="site-subtitle" class="font-italic">Full stack web developer, Mechanical engineer, Father, Husband, Passionate about learning, Excited with technology, Located in Thessaloniki, Greece</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-3 mr-3 unloaded"></i> <span>HOME</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-3 mr-3 unloaded"></i> <span>CATEGORIES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-3 mr-3 unloaded"></i> <span>ARCHIVES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-3 mr-3 unloaded"></i> <span>ABOUT</span> </a></li></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <span id="mode-toggle-wrapper"> <!-- Switch the mode between dark and light. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <i class="mode-toggle fas fa-sun" dark-mode-invisible></i> <i class="mode-toggle fas fa-moon" light-mode-invisible></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.mode != null) { if (this.mode == ModeToggle.DARK_MODE) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.mode != null) { if (self.mode == ModeToggle.DARK_MODE) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightkMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightkMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span> <span class="icon-border" style="color: green"></span> <a href="https://github.com/dimyG" target="_blank"> <i class="fab fa-github-alt"></i> </a> <a href="https://stackoverflow.com/users/2369865/dimyg" target="_blank"> <i class="fab fa-stack-overflow"></i> </a> <a href="https://twitter.com/DimiGeorgoulas" target="_blank"> <i class="fab fa-twitter"></i> </a> <a href="javascript:window.open('mailto:' + ['dimgeows','gmail.com'].join('@'))"> <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" target="_blank"> <i class="fas fa-rss"></i> </a></div></div><!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Zakanda technical overview</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Zakanda technical overview</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <span class="timeago" data-toggle="tooltip" data-placement="bottom" title="Wed, Jun 3, 2020, 9:33 AM +0000"> Jun 3, 2020 <i class="unloaded">2020-06-03T09:33:00+00:00</i> </span> by <span class="author"> Dimitris Georgoulas </span></div><div> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Fri, Aug 7, 2020, 5:18 PM +0300"> Aug 7, 2020 <i class="unloaded">2020-08-07T14:18:36+00:00</i> </span></div></div><div class="post-content"><h2 id="introduction">Introduction</h2><p><a href="https://www.zakanda.com/">zakanda</a> is my first entrepreneurial endeavor which… failed miserably. You can read the juicy details in <a href="/posts/my-epic-fail-as-a-sports-betting-entrepreneur/">my epic fail as a sports betting entrepreneur</a> story.</p><p>It was aspired to be a sports betting community where anyone could bet with virtual money, track their performance, compete with their friends, follow others players. The betting experts which would stand out, would be able to create premium services to which others could subscribe to, paying them for their valuable advices. The main income stream for zakanda would come from commissions from these payments.</p><p><img src="/assets/img/sample/zakanda_landing_page.png" alt="Desktop View" /></p><p>It is important to understand that zakanda is not a bookmaker. You can’t bet with real money. A typical use case, if you are a betting expert and people want your advices, would be something like this: You spot a great betting opportunity. You bet on it in your bookmaker account. You then repeat the same bet in your zakanda account (with virtual money). Your zakanda followers receive an email and a notification about your latest bet. If your account is premium, only the followers that are subscribed to your paid service are notified. The wider term that describes services similar to zakanda is <em>tipping services</em>.</p><h2 id="main-features">Main features</h2><h3 id="virtual-money">Virtual money</h3><p>(No, this has nothing to do with blockchain, digital currencies or ICOs…)<br /> Let’s begin with a standard convention of tipping services which is to use units instead of virtual money. This means that instead of betting a specific amount, you bet in units. Usually each bet can be between 1 and 5 units. 1 for small bets and 5 for the big ones. Zakanda is a bit different. It tries to completely mirror your bookmaker account. If you have a balance of 2000 euros in your bookmaker account then you would have 2000 virtual euros in your zakanda account too. If you made a bet of 50 euros, you would copy that bet in zakanda using 50 virtual euros. This means that you have a very clear overview of your overall performance through the years.</p><h3 id="bet-groups">Bet Groups</h3><p>The main organization unit in zakanda is the Bet Group. Each bet group has its own balance, bets and settings. Every deposit and every bet that you make, must be assigned to a specific bet group. When a user is registered, a bet group is automatically created for him and everything he does happens within this default bet group. His deposits and bets are assigned to it by default. He doesn’t need to know about the concept of bet groups in order to use zakanda. A user can create as many bet groups as he likes. Doing it, his total balance would be the sum of the balances of each individual group. When he makes a bet he can assign it to the bet group of his choice. A typical use case would be to create one bet group for each of your betting strategies and monitor the performance of each strategy individually. Your followers could choose for which bet groups they will be notified and by what means.</p><p><img src="/assets/img/sample/bet_group_types4.png" alt="Desktop View" /></p><h3 id="private-bets-and-premium-services">Private bets and Premium services</h3><p>A bet group can be of one of three types: <em>Free</em>, <em>Private</em> or <em>Premium</em>. When you bet using a free bet group, then all your followers would be notified for your bet while your open bets (bets that don’t have a result yet) would be visible by everyone. This is the default type for a bet group. A private bet group is one for which your followers will not be notified for the bets assigned to it and also they will not be able to see your private open bets. The third available type is the premium one. In order to be able to create a premium bet group you must first become a seller, which means that you need to provide some additional information about you. Once you do this, you will be able to attach a paid service to your premium bet group, choosing how much you want to charge for a monthly subscription. You can modify the type of a bet group whenever you want.</p><p><img src="/assets/img/sample/private_example2.png" alt="Desktop View" /></p><h3 id="performance-dashboard">Performance dashboard</h3><p>Every user has a dashboard which contains a lot of valuable information about his overall performance like ROI and yield. What makes the zakanda dashboard unique though, is the fact that the charts are interactive. Each chart is automatically filtered by your active selection on another chart. Using this interactivity you can very easily isolate the bets of interest and explore various data that describe the filtered bets. This behaviour would become clear if you play with the charts yourself. For example using the Bets Status pie select the <em>won</em> bets and then from them, select the ones made in the <em>double chance</em> market using the Market pie. All other charts have been automatically filtered to describe this specific group of selected bets. This means that you can extract a lot of valuable information about them, like their average return.</p><p><img src="/assets/img/sample/dashboard3.gif" alt="Desktop View" /></p><h3 id="hidden-amounts">Hidden amounts</h3><p>As we already said, zakanda tries to mirror a user’s bookmaker account with the use of virtual money. This feature is excellent for long term performance tracking but imposes another challenge: Privacy. Having the bet balance visible by everyone might make some users feel a bit uncomfortably. This is not a small issue and to tackle it zakanda offers you the possibility to hide your balance and bet amounts, while still being able to mirror your real balance and share your betting tips with your followers and subscribers. It achieves this by automatically converting your bet amount to percentage of your balance for each bet and converting your real bet balance to units, where one unit represents your average bet amount. To make it clear: Other users will see your balance as units and your bet amounts as percentages of that balance, but you and you alone, will see them as the absolute values that they really are. This way all parties get what they want. You also have the possibility to see your account the way others see it (with units and percentages) simply with the press of a button.</p><p><img src="/assets/img/sample/cash_on_off_3_forever.gif" alt="Desktop View" /></p><h2 id="system-design-and-deployment">System design and deployment</h2><h3 id="system-design">System design</h3><p>zakanda is composed of at least three different processes: A <em>web</em> process, a <em>worker</em> process and a <em>scheduler</em> process. The web process is responsible for handling the http request - response cycle. It receives the client’s request and generates the response.</p><p>Any long running tasks like sending notification emails to followers, are off loaded to a queueing system to be executed as background jobs. The task is added to a queue and is processed by the first available worker process. You can have as many worker processes as you like. The same though is not possible for the web process. The web process hasn’t been created with concurrency in mind, so, to be able to have more than one web processes running at the same time, some changes might be necessary. These changes should tackle any possible race conditions that arise from the current version of the code.</p><p>The scheduler process which must always be up and running, checks periodically a specific queue for any task that has been scheduled for execution at a specific point in time. If it is the time for a task, the scheduler puts this task in the workers queue to be executed by the available worker processes. Examples of scheduled periodic tasks are calls to the data source API for specific data: Getting the sports schedule of the next days, the bookmaker odds for sport events, the results of the latest events etc.</p><h3 id="deployment">Deployment</h3><p>zakanda was initially deployed in Heroku where each process was a dyno. Later though it was containerized and deployed to AWS Elastic Container Service (ECS). In the containerized version the web “process” which in the context of ECS is called web task, is composed of two containers: a gunicorn service (with synchronous workers) which runs behind an nginx service that acts as a buffering reverse proxy. There are a lot of good reasons for such a configuration but they are out this post’s scope. The worker and scheduler tasks contain the worker and scheduler containers respectively. Currently there is no automated deployment pipeline in place, but if zakanda was to become open to users again, such an automated pipeline would be more than necessary.</p><h2 id="tech-stack">Tech stack</h2><h3 id="introduction-1">Introduction</h3><p>As a web application, zakanda has of course both a client and a server part. The server part, the back end of the application, is written in django. The front end is a typical web client composed of html rendered in the server using django templates, css and javascript. Notice though the catch: Despite the fact that the server responds with rendered html, zakanda is a single page application… Sorry, what? As a complete beginner as I was when I started zakanda, I made an immature decision which cost me a lot of time down the line. I chose to make zakanda a single page application without using a proper front end framework like React, Angular or Vue. I just did it using <a href="https://github.com/defunkt/jquery-pjax">pjax.js</a>, AMD modules and <a href="https://requirejs.org/">require.js</a>. This is not how single page applications are made nowadays, so some additional information regarding the front end part of the codebase might be necessary.</p><h3 id="the-front-end">The front end</h3><p>So, pjax.js is a jQuery plugin that uses ajax and pushState to deliver a fast browsing experience by asynchronously updating a web page without the need to fully load the entire page from the server. All links are pjax enabled links, which means that they use ajax to communicate with the server. When a link is pressed pjax will send an ajax request to the server and will update the url using the history API. The server will respond with a rendered html that will replace a specific portion of the page.</p><p>In high level, this is how a zakanda web page is updated:</p><ol><li>User navigation is performed, for example a pjax link is pressed or a back/forward operation is invoked.</li><li>The url changes and an ajax call is made to the server</li><li>The server responds with rendered html.</li><li>A portion of the page is updated with the new html.</li><li>The pjax:end event is caught by an event listener.</li><li>The event listener triggers code that matches the url using regular expressions.</li><li>Specific actions are executed based on the matched url.</li></ol><p>Every javascript file is an AMD module which might require other modules to be loaded first, in order to use things from them. It can also export code for other modules to use. It is important to note that no zakanda variable pollutes the window’s global namespace. Any variable that needs to be shared, is exported from its module and required by the module that needs it.</p><p>Writing a single page application at the scale of zakanda without using a proper front end framework is not an easy task. You have to pretty much reinvent the wheel in some occasions. For example you have to write a proper front end routing functionality, listening to the proper browser and pjax events and triggering the required actions. You must also keep track of user interface changes and propagate them to the rest of the application simply using jquery. These things make the whole front end codebase prone to bugs and difficult to maintain. Front end frameworks weren’t invented without good reasons after all…</p><p>The interactive dashboard is made using <a href="https://dc-js.github.io/dc.js/">dc.js</a> and <a href="https://github.com/crossfilter/crossfilter">crossfilter.js</a>. The data is processed in the server with <a href="https://github.com/pandas-dev/pandas">pandas</a>, served to the web client as json objects which are then processed by crossfilter.js and transformed to interactive charts by dc.js.</p><p><a href="https://keenthemes.com/metronic/">Metronic</a> is the used theme. It is highly customized to become a dark theme. The static files are stored and served by an AWS S3 bucket.</p><h3 id="the-back-end">The back end</h3><p>The server side is written in django, with Postgresql database and Redis as cache store and message broker.</p><p>Some of the libraries used:</p><ul><li><a href="https://getstream.io/">getstream.io</a> for activities and notifications management</li><li><a href="https://www.mailgun.com/">mailgun</a> for email sending</li><li><a href="https://www.skrill.com/">skrill</a> as payment processor</li><li><a href="https://python-rq.org/">Redis Queue</a> for the task queue implementation (I know, not Celery)</li><li><a href="https://github.com/danirus/django-comments-xtd">django-comments-xtd</a> for comments implementation</li><li><a href="https://django-allauth.readthedocs.io/en/latest/installation.html">django-allauth</a> for user authentication</li><li><a href="https://numpy.org/">numpy</a> and <a href="https://github.com/pandas-dev/pandas">pandas</a> for vectorizing some heavy calculations on the server</li></ul><p>The sports data is retrieved from <a href="https://www.sportmonks.com/">sportmonks</a> but its important to note that zakanda supports more than one data sources. There is a mapping functionality that matches objects between the different data sources.</p><h2 id="source-code">Source code</h2><p>The source code is stored in <a href="https://github.com/dimyG/zakanda_public">this</a> Github repository. It was private for a long time but I finally decided that there was little meaning in keeping it that way.</p><p>The code was written in a span of two years and as I was fairly inexperienced with web development when I started, some parts that haven’t been refactored since, reflect that initial inexperience. A typical bad code example is the part that collects the upcoming events, triggered by the “Pick Bets” page. What a <a href="https://github.com/dimyG/zakanda_public/blob/a311f3070fa02b1e8a231ddddd7e8e43c924e464/games/views.py#L313">mesh</a>. The data needed by the django template, is collected in a number of complex dictionaries in a long chain of function calls. I always wanted to throw this part away and completely rewrite it, adding additional functionality like search, but other things had priority at the time and eventually this mesh remained. The more recent parts are clearly better, for example the data source mapping and data validation <a href="https://github.com/dimyG/zakanda_public/blob/master/data_sources/pre_models.py">code</a> or the Bet Groups and Subscription <a href="https://github.com/dimyG/zakanda_public/blob/master/bet_tagging/models.py">code</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/misc/'>Misc</a>, <a href='/categories/work-experience/'>Work Experience</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/zakanda/" class="post-tag no-text-decoration" >zakanda</a> <a href="/tags/django/" class="post-tag no-text-decoration" >django</a> <a href="/tags/work-experience/" class="post-tag no-text-decoration" >work experience</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="#">All rights reserved</a> by the author.</div><!-- Post sharing snippet v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Zakanda technical overview - Dimitris Georgoulas&url=https://dimyg.github.io/posts/zakanda_technical_overview/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Zakanda technical overview - Dimitris Georgoulas&u=https://dimyg.github.io/posts/zakanda_technical_overview/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Zakanda technical overview - Dimitris Georgoulas&url=https://dimyg.github.io/posts/zakanda_technical_overview/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><!-- The Pannel on right side (Desktop views) v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><h3 data-toc-skip>Recent Update</h3><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/the-pharaoh-and-the-millionaire/">The pharaoh and the millionaire</a></li><li><a href="/posts/satisfaction-unit-parity/">Satisfaction Unit Parity</a></li><li><a href="/posts/bitcoin-as-a-hedge/">Bitcoin as a hedge</a></li><li><a href="/posts/function-vs-class-based-views-in-django-rest/">Function vs Class based views in Django Rest Framework</a></li><li><a href="/posts/thinking-about-intelligence/">Thinking about intelligence</a></li></ul></div><div id="access-tags"><h3 data-toc-skip>Trending Tags</h3><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/work-experience/">work experience</a> <a class="post-tag" href="/tags/django/">django</a> <a class="post-tag" href="/tags/economics/">economics</a> <a class="post-tag" href="/tags/zakanda/">zakanda</a> <a class="post-tag" href="/tags/tips/">tips</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/http/">http</a> <a class="post-tag" href="/tags/django-rest-framework/">django rest framework</a> <a class="post-tag" href="/tags/d3/">d3</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><h3 data-toc-skip class="pl-3 pt-2 mb-3">Contents</h3><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="post-extend-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --><div class="post-navigation d-flex justify-content-between"> <a href="/posts/my-epic-fail-as-a-sports-betting-entrepreneur/" class="btn btn-outline-primary"><p>My epic fail as a sports betting entrepreneur</p></a> <a href="/posts/thinking-about-intelligence/" class="btn btn-outline-primary"><p>Thinking about intelligence</p></a></div><!-- The related posts of current post. Placed in the bottom of every single post. v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div id="related-posts" class="mt-4 mb-2 mb-sm-4 pb-2"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/my-epic-fail-as-a-sports-betting-entrepreneur/"><div class="card-body"> <span class="timeago small"> Jun 2, 2020 <i class="unloaded">2020-06-02T09:30:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>My epic fail as a sports betting entrepreneur</h3><div class="text-muted small"><p>TLDR The only way to survive as a company in the sports betting industry is to go on bookmakers side. If your vision is to help players make money then you are doomed to fail. I had no interest to...</p></div></div></a></div><div class="card"> <a href="/posts/work-experience-overview/"><div class="card-body"> <span class="timeago small"> May 30, 2020 <i class="unloaded">2020-05-30T09:33:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Work Experience Overview</h3><div class="text-muted small"><p>2001 - 2008 Mechanical engineering studies, in the polytechnic school of the Aristotle University of Thessaloniki. 2008 - 2009 Military service (compulsory in Greece). 2009 - 2015 CAE engineer ...</p></div></div></a></div><div class="card"> <a href="/posts/my-experience-as-a-cae-engineer/"><div class="card-body"> <span class="timeago small"> Jun 1, 2020 <i class="unloaded">2020-06-01T09:30:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>My experience as a CAE engineer</h3><div class="text-muted small"><p>Computer Aided Engineering CAE is probably an unknown term for most people coming from the web development world. It might say something to people with a pure computer science background but gener...</p></div></div></a></div></div></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const el = document.querySelectorAll('#post-wrapper img'); const observer = lozad(el); observer.observe(); </script> <!-- The Footer v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2020 <a href="https://twitter.com/DimiGeorgoulas">Dimitris Georgoulas</a>. <span data-toggle="tooltip" data-placement="top" title="All rights are reserved. You can find me on twitter or contact me at dimgeows@gmail.com.">All rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/">Chirpy</a> theme.</p></div></div></footer></div><!-- The Search results v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/work-experience/">work experience</a> <a class="post-tag" href="/tags/django/">django</a> <a class="post-tag" href="/tags/economics/">economics</a> <a class="post-tag" href="/tags/zakanda/">zakanda</a> <a class="post-tag" href="/tags/tips/">tips</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/http/">http</a> <a class="post-tag" href="/tags/django-rest-framework/">django rest framework</a> <a class="post-tag" href="/tags/d3/">d3</a></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- The GA snippet v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-175153150-1', 'auto'); ga('send', 'pageview'); </script> <!-- Jekyll Simple Search loader v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js" integrity="sha256-qcLR00zq6pJk4je3MLgAri8Nn+ZumUlXgTKR2H/xCY0=" crossorigin="anonymous"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://dimyg.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
